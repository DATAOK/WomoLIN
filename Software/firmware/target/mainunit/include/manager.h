/* SPDX-License-Identifier: GPLv3-or-later */
/* Copyright (c) 2019 Project WomoLIN */
/* Author Myron Franze <myronfranze@web.de> */

#pragma once

#include "unit.h"
#include "../../../womolin/include/managerbase.h"
#include "../../../womolin/include/unit.h"

namespace womolin::target
{
   
   using namespace womolin::interface::hal;
   using namespace womolin::signal;
   using namespace womolin::unit;
   using namespace womolin::manager;

   class Manager : public WomolinManagerBase 
   {
      public:
         Manager( IWomolinSerial & attSerial );
         ~Manager() = default;

      private:
         // connecting units and signals from womolin and hal, generated by generator
         
         // predefined hal units
         HalOutput                 HAL_SIMULATION          { HalOutput( DEV_ID::SIMULATION ) }; 
         HalInput                  HAL_SIMULATION_STAT     { HalInput( DEV_ID::SIMULATION ) }; 
         HalInput                  HAL_FWVER               { HalInput( DEV_ID::FWVER ) }; 

         // board hal units
         HalOutput                 HAL_K1                  { HalOutput( DEV_ID::K1 ) }; 
         HalOutput                 HAL_K2                  { HalOutput( DEV_ID::K2 ) }; 
         HalOutput                 HAL_K3                  { HalOutput( DEV_ID::K3 ) }; 
         HalOutput                 HAL_K4                  { HalOutput( DEV_ID::K4 ) }; 

         HalInput                  HAL_K1_STAT             { HalInput( DEV_ID::K1 ) }; 
         HalInput                  HAL_K2_STAT             { HalInput( DEV_ID::K2 ) }; 
         HalInput                  HAL_K3_STAT             { HalInput( DEV_ID::K3 ) }; 
         HalInput                  HAL_K4_STAT             { HalInput( DEV_ID::K4 ) }; 

         HalInput                  HAL_ADC1                { HalInput( DEV_ID::ADC1 ) }; 

         // predefined units
         WomolinOutput             WOMOLIN_SIMULATION      { WomolinOutput( HAL_SIMULATION ) };
         WomolinInput              WOMOLIN_SIMULATION_STAT { WomolinInput( HAL_SIMULATION_STAT ) };
         WomolinInput              WOMOLIN_FWVER           { WomolinInput( HAL_FWVER ) };

         // user units
         WomolinOutput             WOMOLIN_K1              { WomolinOutput( HAL_K1 ) };
         WomolinOutput             WOMOLIN_K2              { WomolinOutput( HAL_K2 ) };
         WomolinOutput             WOMOLIN_K3              { WomolinOutput( HAL_K3 ) };
         WomolinOutput             WOMOLIN_K4              { WomolinOutput( HAL_K4 ) };

         WomolinInput              WOMOLIN_K1_STAT         { WomolinInput( HAL_K1_STAT ) };
         WomolinInput              WOMOLIN_K2_STAT         { WomolinInput( HAL_K2_STAT ) };
         WomolinInput              WOMOLIN_K3_STAT         { WomolinInput( HAL_K3_STAT ) };
         WomolinInput              WOMOLIN_K4_STAT         { WomolinInput( HAL_K4_STAT ) };

         WomolinInput              WOMOLIN_CAR_VOLTAGE     { WomolinInput( HAL_ADC1 ) };

         
         // predefined signals
         WomolinSignalSetReset     simulation              { WomolinSignalSetReset() };
         WomolinSignalSetReset     simulation_stat         { WomolinSignalSetReset() };
         WomolinSignalGetFwVer     fwver                   { WomolinSignalGetFwVer() };

         // user signals
         WomolinSignalSetReset     k1                      { WomolinSignalSetReset() };
         WomolinSignalSetReset     k2                      { WomolinSignalSetReset() };
         WomolinSignalSetReset     k3                      { WomolinSignalSetReset() };
         WomolinSignalSetReset     k4                      { WomolinSignalSetReset() };

         WomolinSignalSetReset     k1_to_k4                { WomolinSignalSetReset() };

         WomolinSignalSetReset     k1_stat                 { WomolinSignalSetReset() };
         WomolinSignalSetReset     k2_stat                 { WomolinSignalSetReset() };
         WomolinSignalSetReset     k3_stat                 { WomolinSignalSetReset() };
         WomolinSignalSetReset     k4_stat                 { WomolinSignalSetReset() };

         WomolinSignalGetVoltage   car_voltage             { WomolinSignalGetVoltage() };

   };

}
